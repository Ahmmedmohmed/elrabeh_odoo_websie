<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <template id="contractor_installments_template" name="Contractor Installments Page">
      <t t-call="website.layout">
        <div id="wrap" class="py-5">
          <div class="container">
            <h2 class="text-center fw-bold mb-4" style="color:#d9534f;">๐ฐ ุงูุฏูุนุงุช ุงููุณุชุญูุฉ ูู</h2>
            <div class="card shadow-lg border-0 rounded-4 p-4">
              <table class="table table-hover">
                <thead class="bg-light">
                  <tr>
                    <th>ุงุณู ุงูุฏูุนุฉ</th>
                    <th>ุงููุจูุบ</th>
                    <th>ุงูุญุงูุฉ</th>
                    <th>ุฅุฌุฑุงุก</th>
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="installments" t-as="inst">
                    <tr>
                      <td><t t-esc="inst.name"/></td>
                      <td><t t-esc="inst.amount"/></td>
                      <td><t t-esc="dict(inst._fields['state'].selection).get(inst.state)"/></td>
                      <td>
                        <t t-if="inst.state == 'draft'">
                          <!-- ูููุฐุฌ ุฑูุน ุงููุฑูู (ุงุฎุชูุงุฑู) -->
                          <form action="/installment/upload_attachment" method="post" enctype="multipart/form-data" class="d-inline">
                            <input type="hidden" name="installment_id" t-att-value="inst.id"/>
                            <input type="file" name="contractor_attachment" class="form-control mb-2"/>
                            <button type="submit" class="btn btn-sm btn-secondary">๐ ุฑูุน ูุฑูู</button>
                          </form>
                          <!-- ุฒุฑ ุทูุจ ุงูุฏูุน -->
                          <a t-att-href="'/contractor/request_payment/%d' % inst.id" class="btn btn-sm btn-warning mt-2">ุทูุจ ุฏูุน</a>
                        </t>
                        <t t-elif="inst.state == 'requested'">
                          <span class="text-primary fw-bold">ุจุงูุชุธุงุฑ ููุงููุฉ ุงูุงุณุชุดุงุฑู</span>
                        </t>
                        <t t-elif="inst.state == 'consultant_approved'">
                          <span class="text-success fw-bold">ุจุงูุชุธุงุฑ ููุงููุฉ ุงููุงูู</span>
                        </t>
                        <t t-elif="inst.state == 'owner_approved'">
                          <span class="text-success fw-bold">ุจุงูุชุธุงุฑ ุงูุฏูุน ูู ุงููุงูู</span>
                        </t>
                        <t t-elif="inst.state == 'paid'">
                          <span class="text-success fw-bold">ุชู ุงูุฏูุน - ูู ุงูุชุธุงุฑ ุชุฃููุฏู</span>
                        </t>
                        <t t-elif="inst.state == 'done'">
                          <span class="text-success fw-bold">โ ููุชููุฉ</span>
                        </t>
                        <t t-elif="inst.state == 'rejected'">
                          <span class="text-danger fw-bold">ุชู ุงูุฑูุถ</span>
                        </t>
                      </td>
                    </tr>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </t>
    </template>
  </data>
</odoo>

