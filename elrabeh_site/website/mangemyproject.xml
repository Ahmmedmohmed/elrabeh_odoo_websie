<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <template id="project_form_template" name="Project Form Page">
      <t t-call="website.layout">

        <!-- Navbar فوق الصفحة -->

        <!-- بقية الصفحة -->
        <div id="wrap" class="py-5">

          <style>
            /* شكل موحد لزر رفع الملفات */
            .custom-file-input {
              position: relative;
              display: inline-block;
              width: 100%;
            }
            .custom-file-input input[type="file"] {
              position: absolute;
              left: 0;
              top: 0;
              opacity: 0;
              width: 100%;
              height: 100%;
              cursor: pointer;
            }
            .custom-file-label {
              display: block;
              background: #f8f9fa;
              border: 1px solid #ced4da;
              border-radius: 8px;
              padding: 10px;
              text-align: center;
              color: #6c757d;
              font-size: 1rem;
            }
            .custom-file-input input[type="file"]:valid + .custom-file-label::after {
              content: attr(data-filename);
            }
            /* لون زر إضافة المشروع */
            .btn-project {
              background-color: #d9534f;
              border: none;
              color: #fff;
            }
            .btn-project:hover {
              background-color: #c9302c;
            }
          </style>

          <!-- Arabic Form -->
          <div class="wrap-ar" dir="rtl">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light py-3">
          <div class="container">
            <a class="navbar-brand fw-bold" href="#">🚀 مشاريعنا</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarRoles" aria-controls="navbarRoles" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarRoles">
              <ul class="navbar-nav ms-auto">
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle fw-bold" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    المشاريع حسب الدور
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="/contractor/my_projects">مشاريع المقاول</a></li>
                    <li><a class="dropdown-item" href="/owner/my_projects">مشاريع المالك</a></li>
                    <li><a class="dropdown-item" href="/consultant/my_projects">مشاريع الاستشاري</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>

            <div class="container">
              <h2 class="text-center fw-bold mb-4" style="color:#d9534f;">🚀 ابدأ مشروعك معنا الآن!</h2>
              <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header text-white text-center py-4" style="background: linear-gradient(90deg, #d9534f, #c9302c);">
                  <h3 class="mb-0 fw-bold">إضافة مشروع جديد</h3>
                </div>
                <div class="card-body p-5">
                  <form action="/project/step2" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="row mb-4">

                       <div class="col-md-4">
                        <label class="fw-bold fs-5">اسم المشروع</label>
                        <input type="text" name="name" required="true" class="form-control form-control-lg shadow-sm"/>
                      </div>
                      <div class="col-md-4">
                        <label class="fw-bold fs-5">القيمة التعاقدية</label>
                        <input type="number" step="0.01" name="contract_value" required="true" class="form-control form-control-lg shadow-sm"/>
                      </div>
                      <div class="col-md-4">
                        <label class="fw-bold fs-5">عدد الدفعات</label>
                        <input type="number" name="installments_count" min="1" required="true" class="form-control form-control-lg shadow-sm"/>
                      </div>

                    </div>

                    <div class="mb-4">
                      <label class="fw-bold fs-5">العنوان</label>
                      <textarea name="address" rows="3" class="form-control form-control-lg shadow-sm"></textarea>
                    </div>

                    <div class="row mb-4">
                      <div class="col-md-6">
                        <label class="fw-bold fs-5">الدور</label>
                        <select name="role" required="true" class="form-control form-control-lg shadow-sm">
                          <option value="">اختر الدور</option>
                          <option value="owner">مالك</option>
                          <option value="contractor">مقاول</option>
                          <option value="consultant">استشاري</option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <label class="fw-bold fs-5">صورة المشروع</label>
                        <div class="custom-file-input">
                          <input type="file" name="image" onchange="this.nextElementSibling.setAttribute('data-filename', this.files[0]?.name || 'اختر ملف')"/>
                          <span class="custom-file-label" data-filename=" لم يتم اختيار ملف">اختر ملف</span>
                        </div>
                      </div>
                    </div>

                    <div class="mb-4">
                      <label class="fw-bold fs-5">مرفق</label>
                      <div class="custom-file-input">
                        <input type="file" name="attachment" onchange="this.nextElementSibling.setAttribute('data-filename', this.files[0]?.name || 'اختر ملف')"/>
                        <span class="custom-file-label" data-filename=" لم يتم اختيار ملف">اختر ملف </span>
                      </div>
                    </div>

                    <div class="text-center mt-5">
                      <button type="submit" class="btn btn-project btn-lg px-5 shadow-sm rounded-pill">التالي</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- English Form -->
          <div class="wrap-en mt-5">
            <div class="container">
              <h2 class="text-center fw-bold mb-4" style="color:#d9534f;">🚀 Start Your Project With Us!</h2>
              <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header text-white text-center py-4" style="background: linear-gradient(90deg, #d9534f, #c9302c);">
                  <h4 class="mb-0 fw-bold">Add New Project</h4>
                </div>
                <div class="card-body p-5">
                  <form action="/project/submit" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="row mb-4">
                      <div class="col-md-4">
                        <label class="fw-bold fs-5">Contract Value</label>
                        <input type="number" step="0.01" name="contract_value" required="true" class="form-control form-control-lg shadow-sm"/>
                      </div>
                      <div class="col-md-4">
                        <label class="fw-bold fs-5">Number of Installments</label>
                        <input type="number" name="installments_count" min="1" required="true" class="form-control form-control-lg shadow-sm"/>
                      </div>
                      <div class="col-md-4">
                        <label class="fw-bold fs-5">Project Name</label>
                        <input type="text" name="name" required="true" class="form-control form-control-lg shadow-sm"/>
                      </div>
                    </div>

                    <div class="mb-4">
                      <label class="fw-bold fs-5">Address</label>
                      <textarea name="address" rows="3" class="form-control form-control-lg shadow-sm"></textarea>
                    </div>

                    <div class="row mb-4">
                      <div class="col-md-6">
                        <label class="fw-bold fs-5">Your Role</label>
                        <select name="role" required="true" class="form-control form-control-lg shadow-sm">
                          <option value="">Select Role</option>
                          <option value="owner">Owner</option>
                          <option value="contractor">Contractor</option>
                          <option value="consultant">Consultant</option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <label class="fw-bold fs-5">Project Image</label>
                        <div class="custom-file-input">
                          <input type="file" name="image" onchange="this.nextElementSibling.setAttribute('data-filename', this.files[0]?.name || 'Choose file')"/>
                          <span class="custom-file-label" data-filename="No file chosen">Choose file</span>
                        </div>
                      </div>
                    </div>

                    <div class="mb-4">
                      <label class="fw-bold fs-5">Attachment</label>
                      <div class="custom-file-input">
                        <input type="file" name="attachment" onchange="this.nextElementSibling.setAttribute('data-filename', this.files[0]?.name || 'Choose file')"/>
                        <span class="custom-file-label" data-filename="No file chosen">Choose file</span>
                      </div>
                    </div>

                    <div class="text-center mt-5">
                      <button type="submit" class="btn btn-project btn-lg px-5 shadow-sm rounded-pill">Next</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

        </div>
      </t>
    </template>
  </data>
</odoo>
